name: ğŸš€ Gmail Test Sender

on:
  schedule:
    - cron: '*/5 * * * *'
  workflow_dispatch:
jobs:
  send-test-email:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: ğŸ Setup Python 3.11
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
        
    - name: ğŸ“¤ Send Test Email (Use existing config.json)
      run: |
        # âœ… æª¢æŸ¥ç¾æœ‰ config.json
        echo "ğŸ“ Current files:"
        ls -la *.json *.py
        
        # âœ… ç›´æ¥ç”¨ä½ å·² commit å˜… config.json
        if [ -f "config.json" ]; then
          echo "âœ… Found config.json, using it..."
          cat config.json
          python DailySender.py --config config.json
        else
          echo "âŒ config.json not found in repo!"
          ls -la
          exit 1
        fi
        
    - name: ğŸ“Š Final Status
      if: always()
      run: |
        echo "ğŸ“ All files in root:"
        ls -la
        echo "ğŸ“§ config.json content:"
        cat config.json || echo "No config.json"
