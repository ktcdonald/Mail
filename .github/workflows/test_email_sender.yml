name: ðŸš€ Gmail Test Sender

on:
  workflow_dispatch:  # åªæ‰‹å‹•è§¸ç™¼
  
jobs:
  send-test-email:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: ðŸ Setup Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
    
    - name: ðŸ“¤ Send Test Email
      env:
        GMAIL_EMAIL: ${{ secrets.GMAIL_EMAIL }}
        APP_PASSWORD: ${{ secrets.APP_PASSWORD }}
        TO_EMAIL: ${{ secrets.TO_EMAIL }}
      run: |
        # å‹•æ…‹ç”Ÿæˆ config
        cat > config.json << EOF
        {
          "gmail_email": "$GMAIL_EMAIL",
          "app_password": "$APP_PASSWORD",
          "to_email": "$TO_EMAIL",
          "bcc_list": [],
          "subject": "ðŸ§ª GitHub Actions Test - $(date +%Y%m%d-%H%M)",
          "html_content": "<h2>âœ… Auto Test Success!</h2><p>Time: $(date)</p>"
        }
        EOF
        
        python daily_sender.py --config config.json
        
    - name: ðŸ“Š Log Results
      if: always()
      run: ls -la test_data/ && cat config.json
